<!DOCTYPE html>
<html lang="en">
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?2ee397c6441d13949c200cd222c06a7f";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="街拍艺术馆致力于为广大街拍爱好者提供一个分享的平台，打造中国街拍第一站">
    <meta name="keywords" content="街拍，图片，翘臀，包臀裙，美腿，超短裤，高跟">
    <link rel="stylesheet" type="" href="../common/css/cheap.css">
    <link rel="stylesheet" href="../common/css/sidebar.css">
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_1539351_mchl12rjkbh.css">
    <title>街拍艺术馆-包臀裙性感美腿高跟美女图片欣赏</title>



</head>

<body>
    <div class="nav wrap">
        <div class="back">
            <a id='back' class="iconfont iconfanhui"></a>
        </div>
        <div class="nav-list">
            <ul class="nav-list-wrap">
                <li class="nav-item">
                    <a href="../denglu/" class="nav-item-link">登录</a>
                </li>
                <li class="nav-item">
                    <a href="../index.html" class="nav-item-link">首页</a>
                </li>
                <li class="nav-item">
                    <a href="../shoucang/" class="nav-item-link">我的收藏</a>
                </li>
                <li class="nav-item">
                    <a href="index.html" class="nav-item-link">成为VIP</a>
                </li>
            </ul>
        </div>
        <div class="nav-mobile">
            <div class="nav-btn">
                <span class="bar bar-01"></span>
                <span class="bar bar-02"></span>
                <span class="bar bar-03"></span>
            </div>
            <div class="nav-mobile-menu">
                <div class="nav-user">
                    <p class="home">
                        <img src="../common/images/gohome.png" alt="街拍艺术馆">
                    </p>
                    <p id='user' class="tel">
                        <img src="" alt="" class="figureurl">
                        <span class="nickname"></span>
                    </p>
                    <a id='login_bar' href="../denglu/" class='hidden'>登录</a>
                </div>
                <ul class="nav-list-wrap">
                    <li class="nav-mobile-item">
                        <a href="../index.html" class="nav-mobile-item-link">首页</a>
                    </li>
                    <li class="nav-mobile-item">
                        <a href="../shoucang/" class="nav-mobile-item-link">我的收藏</a>
                    </li>
                    <li class="nav-mobile-item">
                        <a href="index.html" class="nav-mobile-item-link">
                            成为 VIP
                        </a>
                    </li>
                </ul>
            </div>
            <div class="nav-cover"></div>
        </div>
    </div>
    <div class="title">成为VIP会员</div>
    <div class="vip wrap">
        <ul class="vip-wrap">
            <li class="vip-item">
                <div class='vip-item-title'>青铜会员</div>
                <div class="des">¥1</div>
                <div class="selected">
                    <a class="iconfont iconchenggong"></a>
                </div>
            </li>
            <li class="vip-item">
                <div class='vip-item-title'>白银会员</div>
                <div class="des">¥19</div>
                <div class="selected">
                    <a class="iconfont iconchenggong"></a>
                </div>
            </li>
            <li class="vip-item">
                <div class='vip-item-title'>黄金会员</div>
                <div class="des">¥99</div>
                <div class="selected">
                    <a class="iconfont iconchenggong"></a>
                </div>
            </li>
            <li class="vip-item">
                <div class='vip-item-title'>钻石会员</div>
                <div class="des">¥199</div>
                <div class="selected">
                    <a class="iconfont iconchenggong"></a>
                </div>
            </li>
        </ul>
    </div>
    <div class="vip-des">
        <p>青铜会员：欣赏5套视频</p>
        <p>白银会员：欣赏未来一月更新视频及以往更新</p>
        <p>黄金会员：欣赏未来一年更新视频及以往更新</p>
        <p>钻石会员：未来所有更新视频免费看</p>
        <p>唯美视频每日更新，感谢您的信任与支持</p>
        <p style='font-size:18px;color:red;line-height: 1.5;margin-right: .7rem;'>
            支付遇到问题请跳转到手机浏览器浏览
        </p>
        <p style='font-size:18px;color:red;line-height: 1.5;margin-right: .7rem;'>
            小站网址：www.91alex.com,欢迎收藏!
        </p>
    </div>

    <button id='pay' class="pay-btn">微信支付</button>
    <div class="pay-show hidden" id='pay-show'>
        <div>请确认微信支付是否已完成</div>
        <div class="success" id='pay-success'>已完成支付</div>
        <div class="fail" id='pay-fail'>支付遇到问题，重新支付</div>
    </div>
</body>
<script src='../common/js/rem.js'></script>
<script src='../common/js/jQuery.js'></script>
<script src='../common/js/dingyuan.js'></script>
<script src='../common/js/login.js'></script>
<script>
    let money = null;

    // 点击返回按钮
    $('#back').on('click', function() {
        window.history.back()
    })

    // 导航动画
    var navBtn = $(".nav-btn");
    var navInner = $(".nav");
    var navItemArr = $(".nav-item");

    navBtn.on("click", navBtnClickHandler);

    function navBtnClickHandler() {
        console.log(1)
        if (navInner.hasClass("unfold")) {
            console.log(2)
            navInner.removeClass("unfold");
        } else {
            console.log(3)
            navInner.addClass("unfold");
        }

    }

    //选中vip 选项动画
    $('.vip-item').on('click', function() {
        if ($(this).hasClass('active')) {
            $(this).removeClass('active');
            money = null;
        } else {
            $(this).addClass('active').siblings().removeClass('active');
            switch ($(this).index()) {
                case 0:
                    money = 1;
                    break;
                case 1:
                    money = 19;
                    break;
                case 2:
                    money = 99;
                    break;
                case 3:
                    money = 199;

            }
        }

    });

    //支付
    $('#pay').on('click', function() {

        // let search = location.search.substr(1);

        // let code = search.split('&')[0].split('=')[1];

        // console.log(search, code);

        // if (window.tel) {
        //     console.log(tel)
        // } else {
        //     alert('请先登录');
        //     location.href = '../denglu'
        //     return;
        // }


        if (!money) {
            alert('请选择VIP类型');
            return;
        }
        console.log('qqOpenid ' + sessionStorage.getItem("qqOpenid"))
        $.ajax({
            type: "get",
            url: Dingyuan.config.url + '/pay',
            data: {
                // code: code,
                money: money,
                tel: sessionStorage.getItem("tel"),
                qqOpenid: sessionStorage.getItem("qqOpenid")
            },
            success: function(res) {
                console.log(res)

                if (res.mweb_url) {
                    window.location.href = res.mweb_url;
                } else {
                    console.log(res)
                }
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                console.log(XMLHttpRequest.status);
                console.log(XMLHttpRequest.readyState);
                console.log(textStatus);
            }
        });

    })

    // 判断是否支付成功，如果回调地址中有参数，说明是微信支付成功后跳转的页面
    if (location.search) {
        $('#pay-show').removeClass('hidden').addClass('show');

        $('#pay-success').on('click', function() {
            // 获取订单号
            let out_trade_no = location.search.split('?')[1].split('=')[1];

            // 发起支付请求，查询订单
            Dingyuan.blogajax('POST', '/pay/orderquery', {
                out_trade_no: out_trade_no
            }, function(response) {
                console.log('订单情况' + response)
                if (response.statusCode == '200') {
                    // 隐藏pay-show
                    $('#pay-show').removeClass('show').addClass('hidden');

                    alert('恭喜您成为VIP');

                    // 跳转到视频页
                    location.href = 'http://www.91alex.com/video';
                } else {
                    // alert('请先登录');
                    // return null;
                }
            }, function(error) {
                console.log(error)
            })

        });

        $('#pay-fail').on('click', function() {

            // 隐藏pay-show
            $('#pay-show').removeClass('show').addClass('hidden');

            // 跳转到支付页面
            location.href = 'http://www.91alex.com/cheap'
        });


    }
</script>

</html>